apiVersion: v1alpha1
kind: StressTest
notify: true
spec:
  selector:
    name: candidate-service.sysz.svc.cluster.local
  numRequests: 2000
  numConcurrent: 10
  restDuration: 500 # restDuration will always be mentioned in ms
  serverType: "http"
  serverPort: 80
  tests:
    - id: 1
      name: "My Test 1"
      type: "GET"
      endpoint: "/api/v1/status"
      validResponseCodes:
        - 200
        - 201

    - id: 2
      name: "My Test 2"
      type: "POST"
      endpoint: "/api/v1/search/114"
      validResponseCodes:
        - 200
        - 201
      # the body must always be encoding in base64
      # Linux command echo '<your-text>' | base64
      body: "ew0KICAibW9uZ29QYWdlUmVxdWVzdCI6IHsNCiAgICAicGFnZU51bWJlciI6IDAsDQogICAgInBhZ2VTaXplIjogMTAsDQogICAgInRvdGFsUm93cyI6IDEwDQogIH0sDQogICJ0cmFpbEpTT04iOiAie1xyXG4gIFwiVDFcIjoge1xyXG4gICAgXCIkYW5kXCI6IFtcclxuICAgICAge1xyXG4gICAgICAgIFwiJGFuZFwiOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFwiYWdlXCI6IHtcclxuICAgICAgICAgICAgICBcIiRndGVcIjogNjVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgXCIkb3JcIjogW1xyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZ2VuZGVyXCI6IFwiTVwiXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcImdlbmRlclwiOiBcIkZcIlxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIFwibGFiUmVjb3Jkc1wiOiB7XHJcbiAgICAgICAgICBcIiRlbGVtTWF0Y2hcIjoge1xyXG4gICAgICAgICAgICBcInRlc3ROYW1lXCI6IFwiTERMLUNIT0xFU1RFUk9MXCIsXHJcbiAgICAgICAgICAgIFwidGVzdFZhbHVlXCI6IHtcclxuICAgICAgICAgICAgICBcIiRndGVcIjogMTUwLFxyXG4gICAgICAgICAgICAgIFwiJGx0XCI6IDE5MFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgXCIkYW5kXCI6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgXCJsYWJSZWNvcmRzXCI6IHtcclxuICAgICAgICAgICAgICBcIiRlbGVtTWF0Y2hcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ0ZXN0TmFtZVwiOiBcIlRSSUdMWUNFUklERVNcIixcclxuICAgICAgICAgICAgICAgIFwidGVzdFZhbHVlXCI6IHtcclxuICAgICAgICAgICAgICAgICAgXCIkZ3RlXCI6IDE4MCxcclxuICAgICAgICAgICAgICAgICAgXCIkbHRcIjogNTUwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBcIiRvclwiOiBbXHJcbiAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXCJnZW5kZXJcIjogXCJNXCIsXHJcbiAgICAgICAgICAgICAgICBcImxhYlJlY29yZHNcIjoge1xyXG4gICAgICAgICAgICAgICAgICBcIiRlbGVtTWF0Y2hcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwidGVzdE5hbWVcIjogXCJIREwgQ0hPTEVTVEVST0xcIixcclxuICAgICAgICAgICAgICAgICAgICBcInRlc3RWYWx1ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBcIiRsdGVcIjogNDJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIFwiZ2VuZGVyXCI6IFwiRlwiLFxyXG4gICAgICAgICAgICAgICAgXCJsYWJSZWNvcmRzXCI6IHtcclxuICAgICAgICAgICAgICAgICAgXCIkZWxlbU1hdGNoXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICBcInRlc3ROYW1lXCI6IFwiSERMIENIT0xFU1RFUk9MXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0ZXN0VmFsdWVcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgXCIkbHRlXCI6IDUwXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfSxcclxuICBcIjI4OVwiOiB7XHJcbiAgICBcIiRhbmRcIjogW1xyXG4gICAgICB7XHJcbiAgICAgICAgXCJhZ2VcIjoge1xyXG4gICAgICAgICAgXCIkZ3RlXCI6IDI4XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgXCIkb3JcIjogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBcImdlbmRlclwiOiBcIk1cIlxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgXCJnZW5kZXJcIjogXCJGXCJcclxuICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICAgIH1cclxuICAgIF1cclxuICB9LFxyXG4gIFwiMjkzXCI6IHtcclxuICAgIFwibGFiUmVjb3Jkc1wiOiB7XHJcbiAgICAgIFwiJGVsZW1NYXRjaFwiOiB7XHJcbiAgICAgICAgXCJ0ZXN0TmFtZVwiOiBcIkxETC1DSE9MRVNURVJPTFwiLFxyXG4gICAgICAgIFwidGVzdFZhbHVlXCI6IHtcclxuICAgICAgICAgIFwiJGd0ZVwiOiAxNTAsXHJcbiAgICAgICAgICBcIiRsdFwiOiAxOTBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIFwiMjg4XCI6IHtcclxuICAgIFwiJGFuZFwiOiBbXHJcbiAgICAgIHtcclxuICAgICAgICBcImxhYlJlY29yZHNcIjoge1xyXG4gICAgICAgICAgXCIkZWxlbU1hdGNoXCI6IHtcclxuICAgICAgICAgICAgXCJ0ZXN0TmFtZVwiOiBcIlRSSUdMWUNFUklERVNcIixcclxuICAgICAgICAgICAgXCJ0ZXN0VmFsdWVcIjoge1xyXG4gICAgICAgICAgICAgIFwiJGd0ZVwiOiAxODAsXHJcbiAgICAgICAgICAgICAgXCIkbHRcIjogNTUwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBcIiRvclwiOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFwiZ2VuZGVyXCI6IFwiTVwiLFxyXG4gICAgICAgICAgICBcImxhYlJlY29yZHNcIjoge1xyXG4gICAgICAgICAgICAgIFwiJGVsZW1NYXRjaFwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInRlc3ROYW1lXCI6IFwiSERMIENIT0xFU1RFUk9MXCIsXHJcbiAgICAgICAgICAgICAgICBcInRlc3RWYWx1ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICAgIFwiJGx0ZVwiOiA0MlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgXCJnZW5kZXJcIjogXCJGXCIsXHJcbiAgICAgICAgICAgIFwibGFiUmVjb3Jkc1wiOiB7XHJcbiAgICAgICAgICAgICAgXCIkZWxlbU1hdGNoXCI6IHtcclxuICAgICAgICAgICAgICAgIFwidGVzdE5hbWVcIjogXCJIREwgQ0hPTEVTVEVST0xcIixcclxuICAgICAgICAgICAgICAgIFwidGVzdFZhbHVlXCI6IHtcclxuICAgICAgICAgICAgICAgICAgXCIkbHRlXCI6IDUwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfSxcclxuICBcIjI5NVwiOiB7XHJcbiAgICBcImxhYlJlY29yZHNcIjoge1xyXG4gICAgICBcIiRlbGVtTWF0Y2hcIjoge1xyXG4gICAgICAgIFwidGVzdE5hbWVcIjogXCJUUklHTFlDRVJJREVTXCIsXHJcbiAgICAgICAgXCJ0ZXN0VmFsdWVcIjoge1xyXG4gICAgICAgICAgXCIkZ3RlXCI6IDE4MCxcclxuICAgICAgICAgIFwiJGx0XCI6IDU1MFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgXCIyOTZcIjoge1xyXG4gICAgXCIkb3JcIjogW1xyXG4gICAgICB7XHJcbiAgICAgICAgXCJnZW5kZXJcIjogXCJNXCIsXHJcbiAgICAgICAgXCJsYWJSZWNvcmRzXCI6IHtcclxuICAgICAgICAgIFwiJGVsZW1NYXRjaFwiOiB7XHJcbiAgICAgICAgICAgIFwidGVzdE5hbWVcIjogXCJIREwgQ0hPTEVTVEVST0xcIixcclxuICAgICAgICAgICAgXCJ0ZXN0VmFsdWVcIjoge1xyXG4gICAgICAgICAgICAgIFwiJGx0ZVwiOiA0MlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgXCJnZW5kZXJcIjogXCJGXCIsXHJcbiAgICAgICAgXCJsYWJSZWNvcmRzXCI6IHtcclxuICAgICAgICAgIFwiJGVsZW1NYXRjaFwiOiB7XHJcbiAgICAgICAgICAgIFwidGVzdE5hbWVcIjogXCJIREwgQ0hPTEVTVEVST0xcIixcclxuICAgICAgICAgICAgXCJ0ZXN0VmFsdWVcIjoge1xyXG4gICAgICAgICAgICAgIFwiJGx0ZVwiOiA1MFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICBdXHJcbiAgfSxcclxuICBcIjI5N1wiOiB7XHJcbiAgICBcImdlbmRlclwiOiBcIk1cIixcclxuICAgIFwibGFiUmVjb3Jkc1wiOiB7XHJcbiAgICAgIFwiJGVsZW1NYXRjaFwiOiB7XHJcbiAgICAgICAgXCJ0ZXN0TmFtZVwiOiBcIkhETCBDSE9MRVNURVJPTFwiLFxyXG4gICAgICAgIFwidGVzdFZhbHVlXCI6IHtcclxuICAgICAgICAgIFwiJGx0ZVwiOiA0MlxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0sXHJcbiAgXCIyOThcIjoge1xyXG4gICAgXCJnZW5kZXJcIjogXCJGXCIsXHJcbiAgICBcImxhYlJlY29yZHNcIjoge1xyXG4gICAgICBcIiRlbGVtTWF0Y2hcIjoge1xyXG4gICAgICAgIFwidGVzdE5hbWVcIjogXCJIREwgQ0hPTEVTVEVST0xcIixcclxuICAgICAgICBcInRlc3RWYWx1ZVwiOiB7XHJcbiAgICAgICAgICBcIiRsdGVcIjogNTBcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9LFxyXG4gIFwiY29tcGxldGVcIjogVDEsXHJcbiAgXCJjcml0ZXJpYXNcIjogW1xyXG4gICAgXCJUMVwiLFxyXG4gICAgXCIyODlcIixcclxuICAgIFwiMjkzXCIsXHJcbiAgICBcIjI4OFwiLFxyXG4gICAgXCIyOTVcIixcclxuICAgIFwiMjk2XCIsXHJcbiAgICBcIjI5N1wiLFxyXG4gICAgXCIyOThcIlxyXG4gIF1cclxufVxyXG4iLA0KICAidHJpYWxJZCI6IDExNA0KfQ=="
      headers:
        Content-Type: "application/json"
        UUID: sprintt01
      # auth:
      #   Bearer: "dGhpcyBpcyBhIHRva2VuCg=="
    - id: 3
      name: "My Test 3"
      type: "GET"
      endpoint: "/"
      validResponseCodes:
        - 200
        - 201
  executionOrder:
    - 1
    - 3
    - 2
